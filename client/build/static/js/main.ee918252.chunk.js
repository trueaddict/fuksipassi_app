(this["webpackJsonpfuksipassi-react"]=this["webpackJsonpfuksipassi-react"]||[]).push([[0],{49:function(e,t,n){},50:function(e,t,n){},59:function(e,t,n){},64:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n.n(r),c=n(21),s=n.n(c),i=(n(49),n(5)),o=(n(50),n(39)),u=n(8),l=n(3),j=n.n(l),d=n(4),b="https://fuksipassi-react.herokuapp.com",h=function(){var e=Object(d.a)(j.a.mark((function e(t){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",fetch(b+"/login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)}).then((function(e){return e.json()})));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),p=function(){var e=Object(d.a)(j.a.mark((function e(t){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",fetch(b+"/signout",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)}).then((function(e){return e.json()})));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),f=function(){var e=Object(d.a)(j.a.mark((function e(t){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",fetch(b+"/tasks?jarj_id="+t.id_jarj,{method:"GET",headers:{"Content-Type":"application/json"}}).then((function(e){return e.json()})));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),O=function(){var e=Object(d.a)(j.a.mark((function e(t){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",fetch(b+"/update_tasks",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)}).then((function(e){return e.json()})));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),x=function(){var e=Object(d.a)(j.a.mark((function e(t){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",fetch(b+"/create_task",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)}).then((function(e){return e.json()})));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),m=function(){var e=Object(d.a)(j.a.mark((function e(t){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:fetch(b+"/delete_task",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),v=function(){var e=Object(d.a)(j.a.mark((function e(t,n,r){var a;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(a={}).task=t.id,a.user=n.user_id,a.jarj=n.id_jarj,a.message=r,e.abrupt("return",fetch(b+"/create_request",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(a)}).then((function(e){return e.json()})));case 6:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}(),y=function(){var e=Object(d.a)(j.a.mark((function e(t,n){var r;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:(r={}).requests=n,r.user_id=t.user_id,fetch(b+"/approve_requests",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(r)});case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),g=function(){var e=Object(d.a)(j.a.mark((function e(t){var n;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:(n={}).request_id=t.request_id,fetch(b+"/delete_request",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(n)});case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),k=function(){var e=Object(d.a)(j.a.mark((function e(t){var n;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(n={}).jarj_id=t.id_jarj,e.abrupt("return",fetch(b+"/setup_users",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(n)}).then((function(e){return e.json()})));case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),w=function(){var e=Object(d.a)(j.a.mark((function e(t){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",fetch(b+"/data_setup",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)}).then((function(e){return e.json()})));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),N={loginUser:h,deleteUser:p,fetchData:function(){var e=Object(d.a)(j.a.mark((function e(t){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",fetch(b+"/data?token="+t.user_id,{method:"GET",headers:{"Content-Type":"application/json"}}).then((function(e){return e.json()})));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),useWindowSize:function(){var e=Object(r.useState)({width:void 0,height:void 0}),t=Object(i.a)(e,2),n=t[0],a=t[1];return Object(r.useEffect)((function(){function e(){a({width:window.innerWidth,height:window.innerHeight})}return window.addEventListener("resize",e),e(),function(){return window.removeEventListener("resize",e)}}),[]),n},fetchTasks:f,updateTasks:O,createTask:x,deleteTask:m,createRequest:v,fetchSetupData:w,approveRequests:y,deleteRequest:g,fetchUsers:k,parseName:function(e){var t=e.split("@")[0];if(t.includes(".")){var n=t.slice(0,t.indexOf("."));n=n.charAt(0).toUpperCase()+n.slice(1);var r=t.slice(t.lastIndexOf(".")+1,t.length);return n+" "+(r=r.charAt(0).toUpperCase()+r.slice(1))}return t}},S=n(1),_=function(e){var t=e.setUser,n=e.id_jarj,a=e.theme,c=Object(r.useState)(),s=Object(i.a)(c,2),o=s[0],u=s[1],l=Object(r.useState)(),b=Object(i.a)(l,2),h=b[0],p=b[1],f=Object(r.useState)(),O=Object(i.a)(f,2),x=O[0],m=O[1],v=function(){var e=Object(d.a)(j.a.mark((function e(r){var a,c;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r.preventDefault(),a={useremail:o,password:h,id_jarj:n},e.next=4,N.loginUser(a);case 4:(c=e.sent).user_id?t(c):m(!0);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(S.jsxs)("div",{children:[Object(S.jsx)("style",{children:"body {background-color:"+a.bodyBackgroundColor+";"}),Object(S.jsx)("div",{class:"nav",style:a.navBackgroundColor,children:Object(S.jsx)("div",{class:"row",children:Object(S.jsxs)("div",{class:"center",children:[Object(S.jsx)("div",{class:"col s12 m2 brand-site"}),Object(S.jsx)("div",{class:"col s12 m4 offset-m2",children:Object(S.jsx)("a",{href:"//",class:"",children:Object(S.jsx)("h3",{class:"brand-text brand-logo",children:"Syrinx Fuksipassi"})})})]})})}),Object(S.jsxs)("div",{class:"center brand-text",children:[Object(S.jsx)("h4",{children:"Kirjaudu"}),Object(S.jsx)("p",{children:"Anna isamail (yliopiston JYU) s\xe4hk\xf6posti pitk\xe4ss\xe4 muodossa"}),Object(S.jsx)("p",{children:"Esim."}),Object(S.jsx)("p",{children:Object(S.jsx)("i",{children:"kalle.h.ankka@student.jyu.fi"})})]}),!0===x&&Object(S.jsx)("p",{class:"center error",children:"V\xe4\xe4r\xe4 s\xe4hk\xf6posti tai salasana!"}),Object(S.jsxs)("form",{className:"kuittaus",onSubmit:v,style:a.accentBackgroundColor,children:[Object(S.jsx)("input",{type:"email",name:"useremail",placeholder:"S\xe4hk\xf6posti",pattern:".*@student.jyu.fi",required:!0,onChange:function(e){return u(e.target.value)}})," ",Object(S.jsx)("input",{type:"password",name:"password",placeholder:"Ainej\xe4rjest\xf6n Salasana",id:"password",required:!0,onChange:function(e){return p(e.target.value)}})," ",Object(S.jsx)("div",{class:"center",children:Object(S.jsx)("input",{className:a.button,type:"submit",value:"Kirjaudu"})})]})]})},C=n(15),T=n(86),q=function(e){var t=e.setUser,n=e.user,r=e.theme,a=N.useWindowSize().width<=700?"column":"row",c=[3,6,1,2];if("column"===a){var s,i=[],o=Object(C.a)(c);try{for(o.s();!(s=o.n()).done;){s.value;i.push(0)}}catch(u){o.e(u)}finally{o.f()}c=i}return Object(S.jsx)("div",{className:"nav",style:r.navBackgroundColor,children:Object(S.jsxs)(T.a,{container:!0,spacing:3,direction:a,children:[Object(S.jsx)(T.a,{item:!0,xs:c[0],children:Object(S.jsx)("div",{className:"header",children:Object(S.jsx)("a",{href:r.website_url,children:Object(S.jsx)("img",{src:r.icon_url,alt:"",className:"responsive-img",style:{marginTop:"10px"}})})})}),Object(S.jsx)(T.a,{item:!0,xs:c[1],children:Object(S.jsx)("div",{className:"header",style:{textAlign:"center"},children:Object(S.jsx)("a",{href:"//",className:"",children:Object(S.jsx)("h3",{className:"brand-logo",style:r.navTextColor,children:r.name})})})}),Object(S.jsx)(T.a,{item:!0,xs:c[2],children:Object(S.jsx)("div",{className:"header",style:r.navTextColor,children:N.parseName(n.useremail)})}),Object(S.jsx)(T.a,{item:!0,xs:c[3],children:Object(S.jsx)("div",{className:"header",children:Object(S.jsx)("button",{onClick:function(e){t()},className:r.button,name:"logout-submit",children:"Kirjaudu ulos"})})})]})})},U=function(e){var t=e.theme;return Object(S.jsxs)("div",{class:"center container",children:[Object(S.jsx)("p",{class:"info-text",children:t.info_1}),Object(S.jsx)("p",{class:"info-text",children:t.info_2}),Object(S.jsx)("p",{class:"info-text info-text-last",children:t.info_3})]})},L=function(e){var t=e.task,n=e.user,a=(e.theme,Object(r.useState)()),c=Object(i.a)(a,2),s=c[0],o=c[1],u=Object(r.useState)(),l=Object(i.a)(u,2),b=l[0],h=l[1],p=Object(r.useState)(),f=Object(i.a)(p,2),O=f[0],x=f[1],m=function(){var e=Object(d.a)(j.a.mark((function e(r){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r.preventDefault(),N.createRequest(t,n,s),h(!0);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(r.useEffect)((function(){h(t.lahetetty),x(t.suoritettu)}),[]),Object(S.jsxs)("div",{className:"card z-depth-0",children:[Object(S.jsxs)("div",{className:"card-content center",children:[Object(S.jsxs)("h6",{children:["Teht\xe4v\xe4 ",t.num]}),Object(S.jsx)("h5",{children:t.kuvaus})]}),Object(S.jsx)("div",{className:"card-action center",children:b&!O?Object(S.jsx)("button",{className:"btn brand-text grey",children:"L\xe4hetetty"}):O?Object(S.jsx)("button",{className:"btn brand-text btn-suoritettu",children:"Suoritettu"}):Object(S.jsxs)("form",{onSubmit:m,children:[Object(S.jsx)("input",{type:"text",placeholder:"Viesti / Tutorin nimi",onChange:function(e){return o(e.target.value)}}),Object(S.jsx)("button",{type:"submit",className:"btn brand-text yellow darken-2",children:"L\xe4het\xe4"})]})})]})},B=function(e){var t=e.user,n=e.theme,a=Object(r.useState)(),c=Object(i.a)(a,2),s=c[0],o=c[1],u=Object(r.useState)([]),l=Object(i.a)(u,2),b=l[0],h=l[1],p=N.useWindowSize();Object(r.useEffect)((function(){Object(d.a)(j.a.mark((function e(){var n;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,N.fetchData(t);case 2:n=e.sent,console.log(n),h(n.tehtavat),console.log(b);case 6:case"end":return e.stop()}}),e)})))();for(var e={},n=0,r=Object.keys(b);n<r.length;n++){e[r[n]]=!1}o(e)}),[]);var f=p.width<=700?"column":"row",O=p.width<=700?12:6,x=function(e){for(var t=[],n=0,r=Object.keys(e);n<r.length;n++){var a=r[n];t.push({name:a,orderNum:e[a].orderNum})}return t.sort((function(e,t){return e.orderNum>t.orderNum})),t}(b);return Object(S.jsxs)("div",{className:"container",children:[Object(S.jsx)("style",{children:"body {background-color:"+n.bodyBackgroundColor+";"}),Object(S.jsx)("h4",{className:"center gray-text",children:"Teht\xe4v\xe4t"}),x.length>0?x.map((function(e){return Object(S.jsxs)("div",{className:"",style:{wordWrap:"break-word"},children:[Object(S.jsxs)("button",{className:"accordion ".concat(s[e.name]?"active":""),type:"button",onClick:function(t){return function(e,t){e.preventDefault();var n=Object.assign({},s);n[t]=!n[t],o(n)}(t,e.name)},style:n.taskButton,children:[Object(S.jsx)("h5",{children:e.name}),Object(S.jsx)("br",{}),Object(S.jsxs)("h6",{children:[b[e.name].suoritettu," / ",b[e.name].kpl]})]}),Object(S.jsx)("div",{className:"panel ".concat(s[e.name]?"show":""),children:Object(S.jsx)(T.a,{container:!0,spacing:2,direction:f,children:b[e.name].tehtavat.length>0?b[e.name].tehtavat.map((function(e){return Object(S.jsx)(T.a,{item:!0,xs:O,children:Object(S.jsx)(L,{task:e,user:t,theme:n})},e.id)})):null})})]})})):null]})},P=function(e){var t=e.user,n=e.setUser,r=function(){var e=Object(d.a)(j.a.mark((function e(r){var a;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r.preventDefault(),a={user_id:t.user_id},e.next=4,N.deleteUser(a);case 4:e.sent,n();case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(S.jsxs)("div",{children:[Object(S.jsxs)("div",{className:"policy",children:[Object(S.jsx)("h5",{className:"center gray-text",children:"Luodaanko uusi k\xe4ytt\xe4j\xe4?"}),Object(S.jsx)("p",{className:"center brand-text",children:"Email"}),Object(S.jsxs)("p",{className:"center gray-text",children:["Luomalla k\xe4ytt\xe4j\xe4n hyv\xe4ksyt palvelun k\xe4ytt\xf6ehdot sek\xe4 ",Object(S.jsx)("a",{href:"./gdpr",children:"rekisteri- ja tietosuojaselosteen"})]}),Object(S.jsx)("div",{className:"center margin-top-bottom",children:Object(S.jsx)("button",{onClick:function(e){var r=Object.assign({},t);r.isnewuser=!1,n(r)},className:"btn green-syrinx",children:"Kyll\xe4"})}),Object(S.jsx)("div",{className:"center margin-top-bottom",children:Object(S.jsx)("button",{onClick:r,className:"btn yellow darken-2",children:"Ei"})})]}),Object(S.jsx)("div",{className:"policy-background"})]})},D=n(33),E=n(40),J=n(88),F=n(90),A=n(89),I=function(e){var t=e.user,n=e.theme,a=Object(r.useState)(),c=Object(i.a)(a,2),s=c[0],o=c[1],u=Object(r.useState)(),l=Object(i.a)(u,2),b=l[0],h=l[1];Object(r.useEffect)((function(){Object(d.a)(j.a.mark((function e(){var n;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,N.fetchSetupData(t);case 2:n=e.sent,console.log(n),h(n);case 5:case"end":return e.stop()}}),e)})))()}),[]);var p=function(){var e=Object(d.a)(j.a.mark((function e(n,r){var a,c,s,i,o,u,l;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n.preventDefault(),a=[],c=Object(C.a)(b);try{for(c.s();!(s=c.n()).done;)if((i=s.value).user_id===r.user_id){o=Object(C.a)(i.requests);try{for(o.s();!(u=o.n()).done;)(l=u.value).checked&&a.push(l)}catch(p){o.e(p)}finally{o.f()}}}catch(p){c.e(p)}finally{c.f()}return e.next=6,N.approveRequests(t,a);case 6:Object(d.a)(j.a.mark((function e(){var n;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,N.fetchSetupData(t);case 2:n=e.sent,console.log(n),h(n);case 5:case"end":return e.stop()}}),e)})))();case 7:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),f=function(){var e=Object(d.a)(j.a.mark((function e(t,n,r){var a,c,s,i,o,u,l;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:console.log(n),console.log(r),console.log(t.target.checked),a=Object.assign([],b),c=Object(C.a)(a);try{for(c.s();!(s=c.n()).done;)if((i=s.value).user_id===n.user_id){o=Object(C.a)(i.requests);try{for(o.s();!(u=o.n()).done;)(l=u.value).request_id===r.request_id&&(l.checked=!l.checked)}catch(j){o.e(j)}finally{o.f()}}}catch(j){c.e(j)}finally{c.f()}h(a);case 7:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}(),O=function(){var e=Object(d.a)(j.a.mark((function e(n,r){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n.preventDefault(),Object(d.a)(j.a.mark((function e(){var n;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,N.deleteRequest(r);case 2:return e.next=4,N.fetchSetupData(t);case 4:n=e.sent,console.log(n),h(n);case 7:case"end":return e.stop()}}),e)})))();case 2:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}();return Object(S.jsx)(S.Fragment,{children:Object(S.jsx)("div",{children:Object(S.jsx)("ul",{children:void 0!==b?b.map((function(e,t){return e.requests.length>0?Object(S.jsxs)("li",{children:[Object(S.jsxs)("div",{className:"collapsible-header",onClick:function(e){var n;s===(n=t)?o():o(n)},children:[" ",N.parseName(e.useremail)]}),Object(S.jsx)("div",{className:"".concat(s===t?"collapsible-body":"hidden"," "),style:{backgroundColor:"#4f4f4f4a"},children:Object(S.jsxs)("form",{onSubmit:function(t){return p(t,e)},children:[Object(S.jsx)("div",{children:Object(S.jsx)("button",{className:n.button,children:"Kuittaa valitut"})}),Object(S.jsx)("div",{children:Object(S.jsx)("ul",{children:e.requests.map((function(t,n){return Object(S.jsx)("li",{children:Object(S.jsx)("div",{style:{marginTop:"1rem"},children:Object(S.jsxs)(T.a,{container:!0,spacing:3,children:[Object(S.jsx)(T.a,{item:!0,xs:9,children:Object(S.jsx)("div",{children:Object(S.jsxs)("label",{className:"brand-text",children:[Object(S.jsx)("input",{type:"checkbox",className:"yellow-checkbox",checked:t.checked,onChange:function(n){return f(n,e,t)}}),Object(S.jsx)("span",{className:"margin-bottom",children:t.task_desc}),Object(S.jsx)("div",{className:"small-margin-left font-13",style:{marginLeft:"3rem"},children:t.req_text})]})})}),Object(S.jsx)(T.a,{item:!0,xs:3,children:Object(S.jsx)("button",{className:"btn-small grey",onClick:function(e){return O(e,t)},children:"Hylk\xe4\xe4"})})]})})},n)}))})})]})})]},t):null})):null})})})},M=function(e){var t=e.user,n=e.theme,a=Object(r.useState)([]),c=Object(i.a)(a,2),s=c[0],o=c[1],u=Object(r.useState)(new Map),l=Object(i.a)(u,2),b=l[0],h=l[1],p=Object(r.useState)(!1),f=Object(i.a)(p,2),O=f[0],x=f[1],m=Object(r.useState)(!1),v=Object(i.a)(m,2),y=v[0],g=v[1],k=Object(r.useState)(!1),w=Object(i.a)(k,2),_=w[0],T=w[1],q=Object(r.useState)(""),U=Object(i.a)(q,2),L=U[0],B=U[1],P=Object(r.useState)(),D=Object(i.a)(P,2),E=D[0],J=D[1],F=Object(r.useState)(1),A=Object(i.a)(F,2),I=A[0],M=A[1],K=Object(r.useState)(),R=Object(i.a)(K,2),V=R[0],W=R[1],z=function(){var e=Object(d.a)(j.a.mark((function e(t,n){var r,a,c,i;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:console.log(t.target.value),console.log(t.target.id),r=Object.assign([],s),a=Object(C.a)(r);try{for(a.s();!(c=a.n()).done;)(i=c.value).id===n.id&&("type"===t.target.id?(i[t.target.id]=b.get(parseInt(t.target.value)),i.type_order=parseInt(t.target.value)):i[t.target.id]=t.target.value)}catch(u){a.e(u)}finally{a.f()}console.log(r),o(r);case 7:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),G=function(){var e=Object(d.a)(j.a.mark((function e(t,n){var r,a,c,i;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,N.deleteTask(n);case 2:r=[],a=Object(C.a)(s);try{for(a.s();!(c=a.n()).done;)(i=c.value).id!==n.id&&r.push(i)}catch(t){a.e(t)}finally{a.f()}o(r);case 6:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),H=function(){var e=Object(d.a)(j.a.mark((function e(t){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:x(!O),J(),M(1),W();case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Y=function(){var e=Object(d.a)(j.a.mark((function e(n){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n.preventDefault(),Object(d.a)(j.a.mark((function e(){var n;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(n={}).num=parseInt(E),n.type=b.get(parseInt(I)),n.typeOrder=parseInt(I),n.desc=V,n.jarj_id=t.id_jarj,T(!0),console.log(n),e.next=10,N.createTask(n);case 10:return e.next=12,ee();case 12:case"end":return e.stop()}}),e)})))();case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Q=function(){var e=Object(d.a)(j.a.mark((function e(t,n){var r,a,c,i,u;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.preventDefault(),console.log(t.target[0].value),(r=new Map(b)).set(n,t.target[0].value),console.log(r),a=Object.assign([],s),console.log(a),c=Object(C.a)(a);try{for(c.s();!(i=c.n()).done;)(u=i.value).type=r.get(u.type_order)}catch(l){c.e(l)}finally{c.f()}o(a),h(r);case 11:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),X=function(){var e=Object(d.a)(j.a.mark((function e(t,n){var r;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(""!==L){e.next=2;break}return e.abrupt("return");case 2:(r=new Map(b)).set(n,L),console.log(r),h(r),B("");case 7:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),Z=function(){var e=Object(d.a)(j.a.mark((function e(t,n){var r,a,c,s,i,o;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:(r=new Map(b)).delete(n),console.log(r),h(new Map),a=new Map,c=1,s=Object(C.a)(r.entries());try{for(s.s();!(i=s.n()).done;)o=i.value,console.log(o),a.set(c,o[1]),c++}catch(t){s.e(t)}finally{s.f()}console.log(a),h(a);case 10:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),$=function(){var e=Object(d.a)(j.a.mark((function e(t){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,N.updateTasks(s);case 2:return e.next=4,ee();case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),ee=function(e){Object(d.a)(j.a.mark((function e(){var n,r,a,c,s,i;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,N.fetchTasks(t);case 2:n=e.sent,(r=Object.assign([],n)).sort((function(e,t){return e.num>t.num})),console.log(r),o(r),a=new Map,c=Object(C.a)(n.sort((function(e,t){return e.type_order>t.type_order})));try{for(c.s();!(s=c.n()).done;)i=s.value,a.set(i.type_order,i.type)}catch(u){c.e(u)}finally{c.f()}h(a);case 11:case"end":return e.stop()}}),e)})))()};return Object(r.useEffect)((function(){ee()}),[]),Object(S.jsxs)(S.Fragment,{children:[Object(S.jsxs)("div",{style:{margin:"1rem",paddingBottom:"1rem","overflow-x":"auto",whiteSpace:"nowrap"},children:[Object(S.jsx)("button",{onClick:function(e){return $(e)},className:n.button,style:{marginRight:"1rem"},children:"Tallenna muutokset"}),Object(S.jsx)("button",{onClick:function(e){return H(e)},className:n.button,children:"Lis\xe4\xe4 teht\xe4v\xe4"}),Object(S.jsx)("button",{onClick:function(e){return g(!y)},className:n.button,style:{marginLeft:"1rem"},children:"Lis\xe4\xe4 kategoria"})]}),y?Object(S.jsx)("div",{className:"collection",children:Object(S.jsxs)("div",{className:"collection-item",style:{width:"100%",padding:"0rem 0rem 0rem 1rem"},children:[void 0!==b?Array.from(b).map((function(e,t){var r=Object(i.a)(e,2),a=r[0],c=r[1];return Object(S.jsx)("div",{children:Object(S.jsxs)("form",{onSubmit:function(e){return Q(e,a)},children:[a,".",Object(S.jsx)("div",{className:"input-field inline",children:Object(S.jsx)("input",{type:"text",defaultValue:c})}),Object(S.jsx)("button",{type:"submit",className:"btn-floating "+n.button,style:{marginLeft:"1rem"},children:Object(S.jsx)("i",{class:"material-icons",children:"save"})}),Object(S.jsx)("button",{onClick:function(e){return Z(e,a)},className:"btn-floating "+n.button,style:{marginLeft:"1rem"},children:Object(S.jsx)("i",{class:"material-icons",children:"clear"})})]})},c)})):null,Object(S.jsxs)("div",{style:{borderTop:"2px solid #c4c4c4"},children:[Object(S.jsx)("div",{className:"center",children:Object(S.jsx)("p",{children:"Lis\xe4\xe4 kategoria"})}),Array.from(b).length+1,".",Object(S.jsx)("div",{className:"input-field inline",children:Object(S.jsx)("input",{type:"text",value:L,onChange:function(e){return B(e.target.value)}})}),Object(S.jsx)("button",{onClick:function(e){return X(e,Array.from(b).length+1)},className:n.button,style:{marginLeft:"1rem"},children:"Lis\xe4\xe4"})]})]})}):null,Object(S.jsx)("div",{children:O?Object(S.jsx)("div",{className:"collection",children:Object(S.jsxs)("div",{className:"collection-item",children:[Object(S.jsx)("p",{className:"center",children:"Uusi teht\xe4v\xe4"}),_?Object(S.jsx)("p",{children:"Uusi teht\xe4v\xe4 lis\xe4tty!"}):null,Object(S.jsxs)("form",{onSubmit:Y,children:[Object(S.jsx)("label",{for:"num",children:"Numero"}),Object(S.jsx)("input",{id:"num",type:"number",required:!0,onChange:function(e){J(parseInt(e.target.value)),T(!1)}}),Object(S.jsx)("label",{children:"Kategoria"}),Object(S.jsx)("div",{className:"input-field",children:Object(S.jsx)("select",{defaultValue:1,required:!0,onChange:function(e){M(e.target.value),T(!1)},children:void 0!==b?Array.from(b).map((function(e,t){var n=Object(i.a)(e,2),r=n[0],a=n[1];return Object(S.jsx)("option",{value:parseInt(r),children:a})})):null})}),Object(S.jsx)("label",{for:"desc",children:"Teht\xe4v\xe4"}),Object(S.jsx)("input",{id:"desc",type:"text",required:!0,onChange:function(e){W(e.target.value),T(!1)}}),Object(S.jsx)("input",{className:n.button,type:"submit",value:"Lis\xe4\xe4"})]})]})}):null}),Object(S.jsx)("h4",{className:"center",children:"Teht\xe4v\xe4t"}),Object(S.jsx)("ul",{className:"collection",children:void 0!==s?s.map((function(e){return Object(S.jsx)("li",{className:"collection-item",style:{marginBottom:"0.5rem"},children:Object(S.jsxs)("div",{children:[Object(S.jsxs)("form",{onChange:function(t){return z(t,e)},children:[Object(S.jsx)("label",{for:"num",children:"Numero"}),Object(S.jsx)("input",{id:"num",type:"number",defaultValue:parseInt(e.num)}),Object(S.jsx)("label",{children:"Kategoria"}),Object(S.jsx)("div",{className:"input-field",children:Object(S.jsx)("select",{defaultValue:e.type_order,id:"type",children:void 0!==b?Array.from(b).map((function(e,t){var n=Object(i.a)(e,2),r=n[0],a=n[1];return Object(S.jsx)("option",{value:r,children:a})})):null})}),Object(S.jsx)("label",{for:"desc",children:"Teht\xe4v\xe4"}),Object(S.jsx)("input",{id:"desc",type:"text",defaultValue:e.desc})]}),Object(S.jsx)("button",{onClick:function(t){return G(t,e)},className:n.button,children:"Poista teht\xe4v\xe4"})]})},e.id)})):null})]})},K=function(e){var t=e.user,n=(e.theme,Object(r.useState)()),a=Object(i.a)(n,2),c=a[0],s=a[1],o=Object(r.useState)(),u=Object(i.a)(o,2),l=u[0],b=u[1];Object(r.useEffect)((function(){Object(d.a)(j.a.mark((function e(){var n;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,N.fetchUsers(t);case 2:n=e.sent,console.log(n),b(n);case 5:case"end":return e.stop()}}),e)})))()}),[]);return Object(S.jsx)(S.Fragment,{children:Object(S.jsx)("div",{children:Object(S.jsx)("ul",{children:void 0!==l?l.map((function(e,t){return Object(S.jsxs)("li",{children:[Object(S.jsxs)("div",{className:"collapsible-header",onClick:function(e){var n;c===(n=t)?s():s(n)},children:[N.parseName(e.useremail)," - ",e.approved_task_count," / ",e.task_count]}),Object(S.jsxs)("div",{className:"".concat(c===t?"collapsible-body":"hidden"),style:{backgroundColor:"#4f4f4f4a"},children:[Object(S.jsxs)("div",{style:{borderBottom:"2px solid #00000070"},children:[Object(S.jsx)("p",{children:e.useremail})," ",Object(S.jsx)("p",{children:"Poista k\xe4ytt\xe4j\xe4"})]}),Object(S.jsx)("ul",{children:e.categories.map((function(e,t){return Object(S.jsxs)("li",{children:[Object(S.jsxs)("p",{children:[e.name,":"]}),Object(S.jsxs)("p",{style:{marginLeft:"1rem"},children:[" ",e.approved_type_count," / ",e.type_count," - ",Math.round(e.approved_type_percent),"%"]})]})}))})]})]},t)})):null})})})},R=["children","value","index"];function V(e){var t=e.children,n=e.value,r=e.index,a=Object(E.a)(e,R);return Object(S.jsx)("div",Object(D.a)(Object(D.a)({role:"tabpanel",hidden:n!==r,id:"simple-tabpanel-".concat(r),"aria-labelledby":"full-width-tab-".concat(r)},a),{},{children:n===r&&Object(S.jsx)(S.Fragment,{children:t})}))}var W=Object(J.a)({primary:{color:"black"}}),z=function(e){var t=e.user,n=e.theme,a=Object(r.useState)(0),c=Object(i.a)(a,2),s=c[0],o=c[1],u=(W(),N.useWindowSize().width<=700?"100%":"75%");return Object(S.jsx)(S.Fragment,{children:Object(S.jsxs)("div",{style:{width:u,margin:"auto"},children:[Object(S.jsx)("style",{children:"body {background-color:"+n.bodyBackgroundColor+";"}),Object(S.jsxs)(F.a,{value:s,onChange:function(e,t){o(t)},textColor:"primary",indicatorColor:"primary",TabIndicatorProps:{style:{background:"black","text-color":"black"}},variant:"fullWidth",centered:!0,children:[Object(S.jsx)(A.a,{label:"Pyynn\xf6t",style:{color:"rgba(0, 0, 0, 0.7)"}}),Object(S.jsx)(A.a,{label:"Teht\xe4v\xe4t",style:{color:"rgba(0, 0, 0, 0.7)"}}),Object(S.jsx)(A.a,{label:"K\xe4ytt\xe4j\xe4t",style:{color:"rgba(0, 0, 0, 0.7)"}})]}),Object(S.jsx)(V,{value:s,index:0,children:Object(S.jsx)(I,{user:t,theme:n})}),Object(S.jsx)(V,{value:s,index:1,children:Object(S.jsx)(M,{user:t,theme:n})}),Object(S.jsx)(V,{value:s,index:2,children:Object(S.jsx)(K,{user:t,theme:n})})]})})},G=(n(59),{name:"Syrinx Fuksipassi",button:"btn yellow darken-2",navBackgroundColor:{background:"#f1dc44"},navTextColor:{color:"#000"},bodyBackgroundColor:"#93ad20",accentBackgroundColor:{backgroundColor:"#687a17"},taskButton:{border:"1px solid #fff",color:"#fff"},icon_url:"https://www.syrinx.fi/wp-content/uploads/2019/02/copy-syrinx_logoGreenBackgroundveryYellowWithText.png",website_url:"https://www.syrinx.fi",info_1:"T\xe4m\xe4 on Syrinx Ry:n virallinen Fuksipassi 2020. Seuraavia teht\xe4vi\xe4 suorittamalla saat kaiken irti fuksisyksyst\xe4si ja p\xe4\xe4set samalla sukeltamaan osaksi Syrinxin toimintaa!",info_2:"Vaikka fuksipassin t\xe4ytt\xe4miseen tulee suhtautua omistautuneesti ja asianmukaisella vakavuudella, muista aina teht\xe4vi\xe4 suorittaessasi pit\xe4\xe4 hauskaa ja hakea rennosti uusia kokemuksia.",info_3:"Antoisaa fuksisyksy\xe4!"}),H=function(){var e=Object(r.useState)(),t=Object(i.a)(e,2),n=t[0],a=t[1],c=G;return console.log(n),n?n.is_admin?Object(S.jsxs)(S.Fragment,{children:[Object(S.jsx)(q,{setUser:a,user:n,theme:c}),Object(S.jsx)(z,{user:n,theme:c})]}):Object(S.jsxs)(S.Fragment,{children:[n.isnewuser?Object(S.jsx)(P,{user:n,setUser:a}):Object(S.jsx)(S.Fragment,{}),Object(S.jsx)(q,{setUser:a,user:n,theme:c}),Object(S.jsx)(U,{theme:c}),Object(S.jsx)(B,{user:n,theme:c})]}):Object(S.jsx)(S.Fragment,{children:Object(S.jsx)(o.a,{children:Object(S.jsxs)(u.c,{children:[Object(S.jsx)(u.a,{path:"/syrinx",children:Object(S.jsx)(_,{setUser:a,id_jarj:"1",theme:G})}),Object(S.jsx)(u.a,{path:"/",children:Object(S.jsx)("p",{children:"Public frontpage"})})]})})})};s.a.render(Object(S.jsx)(a.a.StrictMode,{children:Object(S.jsx)(H,{})}),document.getElementById("root"))}},[[64,1,2]]]);
//# sourceMappingURL=main.ee918252.chunk.js.map